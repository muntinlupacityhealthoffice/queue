<!DOCTYPE html>
<html lang="en" class="min-h-screen bg-gray-100">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>CITY HEALTH OFFICE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>

    <style>
      .modal-content {
        max-height: 80vh;
        overflow-y: auto;
      }
      /* Ensure the background image covers the entire viewport without stretching */
      .bg-cho {
          background-image: url('pictures/cho.jpg');
          background-size: cover;
          background-position: center;
      }
    </style>
</head>
<body class="font-sans">

    <!-- Header -->
    <header class="bg-yellow-400 border-b-4 border-blue-900">
        <div class="container mx-auto flex flex-col sm:flex-row justify-center sm:justify-between items-center px-4 py-4">
            <div class="flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-6 text-center sm:text-left">
                <!-- Fallback for the logo image -->
                <img src="pictures/CHO LOGO.PNG" class="rounded-full w-28 h-28 shadow-lg">
                <div>
                    <h1 class="font-semibold text-xl text-blue-900">MUNTINLUPA</h1>
                    <h2 class="font-bold text-4xl text-blue-900">CITY HEALTH OFFICE</h2>
                </div>
            </div>
            <!-- Navigation -->
            <nav class="flex space-x-6 font-bold text-black mt-4 sm:mt-0">
                <a href="index.html" class="hover:underline">HOME</a>
                <a href="#" class="hover:underline">ABOUT</a>
                <a href="#" class="hover:underline">SERVICES</a>
                <a href="#" class="hover:underline">CONTACT</a>
            </nav>
        </div>
    </header>

    <!-- Main Section -->
    <main class="relative container mx-auto flex items-center justify-center min-h-[calc(100vh-144px)]">
        <!-- Background Image with Overlay -->
        <div class="absolute inset-0 bg-cho">
            <div class="absolute inset-0 bg-black opacity-50"></div>
        </div>

        <!-- Role Selection Container -->
        <div class="relative z-10 flex flex-col items-center py-12 space-y-6 bg-white bg-opacity-50 p-8 rounded-lg shadow-xl">
            <h2 class="text-3xl font-bold text-blue-900">Select Your Role</h2>
            
            <!-- Client Button -->
            <button onclick="document.getElementById('clientModal').classList.remove('hidden')"
                    class="w-56 py-3 border-2 border-blue-600 rounded-full text-blue-700 font-bold hover:bg-blue-600 hover:text-white transition">
                CLIENT
            </button>
            
            <!-- Admin Button -->
            <button onclick="document.getElementById('adminModal').classList.remove('hidden')"
                    class="w-56 py-3 border-2 border-blue-600 rounded-full text-blue-700 font-bold hover:bg-blue-600 hover:text-white transition">
                ADMIN
            </button>
        </div>
    </main>

    <!-- Client Modal -->
    <div id="clientModal" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
        <div class="bg-white p-8 rounded-xl shadow-lg w-80 text-center relative">
            <h3 class="text-xl font-bold text-blue-800 mb-4">Client</h3>
            <a href="appointment.html"
               class="block w-full mb-3 bg-yellow-200 px-4 py-3 rounded-lg shadow hover:bg-yellow-300 transition">
                Appointment
            </a>
            <button onclick="document.getElementById('clientModal').classList.add('hidden')"
                    class="mt-4 px-6 py-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition">
                Close
            </button>
        </div>
    </div>
    
    <!-- Admin Modal -->
    <div id="adminModal" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
        <div class="bg-white p-8 rounded-xl shadow-lg w-96 text-center relative modal-content">
            <h3 class="text-xl font-bold text-blue-800 mb-4">Admin Login</h3>
            <form id="adminLoginForm" onsubmit="return false;" class="space-y-4 text-left">
                <div>
                    <label class="block text-sm font-semibold text-gray-700">Email</label>
                    <input type="email" id="adminEmail" required
                           class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700">Password</label>
                    <input type="password" id="adminPassword" required
                           class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400">
                </div>
                <button type="submit"
                        class="w-full px-6 py-2 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700 transition">
                    Login
                </button>
            </form>
            <button onclick="document.getElementById('adminModal').classList.add('hidden')"
                    class="mt-4 px-6 py-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition">
                Close
            </button>
        </div>
    </div>

    <!-- Message Box -->
    <div id="messageBox" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
        <div class="bg-white p-6 rounded-lg shadow-lg text-center">
            <p id="messageText" class="text-lg font-semibold text-gray-800 mb-4"></p>
            <button onclick="document.getElementById('messageBox').classList.add('hidden')"
                    class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition">
                OK
            </button>
        </div>
    </div>

    <!-- Firebase Configuration and Login Script -->
    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyCoBZyS0BKZe1MMG78WpiK9tFQAZBd-wKg",
          authDomain: "cho-clinic.firebaseapp.com",
          databaseURL: "https://cho-clinic-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "cho-clinic",
          storageBucket: "cho-clinic.firebasestorage.app",
          messagingSenderId: "1078609107976",
          appId: "1:1078609107976:web:5fa1f9d52ad7ec5317c5bd",
          measurementId: "G-W1FZLQ4PG9"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        function showMessage(message) {
            document.getElementById('messageText').innerText = message;
            document.getElementById('messageBox').classList.remove('hidden');
        }

        document.getElementById('adminLoginForm').addEventListener('submit', (event) => {
            event.preventDefault();
            const email = document.getElementById('adminEmail').value;
            const password = document.getElementById('adminPassword').value;

            firebase.auth().signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Signed in successfully
                    // Redirect to the staff page or dashboard
                    window.location.href = "https://muntinlupacityhealthoffice.github.io/queue/admin-cityhealthmuntinlupa2025-2026-colegio_de_muntinlupa.html";
                })
                .catch((error) => {
                    // Handle Errors here.
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    if (errorCode === 'auth/wrong-password' || errorCode === 'auth/user-not-found') {
                        showMessage("Invalid email or password.");
                    } else {
                        console.error("Login error:", errorMessage);
                        showMessage("An error occurred during login. Please try again.");
                    }
                });
        });
    </script>
    
</body>
</html>
